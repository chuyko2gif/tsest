# üö® –≠–ö–°–¢–†–ï–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–ò–°–¢–ï–ú–´ –†–û–õ–ï–ô

## –ü—Ä–æ–±–ª–µ–º–∞
–£ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–æ–ª–∏ —Å–±—Ä–æ—Å–∏–ª–∏—Å—å –Ω–∞ `basic`, –¥–∞–∂–µ —É owner.

## –ü—Ä–∏—á–∏–Ω—ã
1. ‚ùå `DEFAULT 'basic'` –≤ –ë–î –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª –≤—Å–µ —Ä–æ–ª–∏
2. ‚ùå –¢—Ä–∏–≥–≥–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–ª —Ä–æ–ª–∏ –ø—Ä–∏ –ª—é–±–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
3. ‚ùå –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–ª `role: 'basic'` –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## –†–µ—à–µ–Ω–∏–µ

### –®–ê–ì 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª **sql/EMERGENCY_FIX_ROLES.sql** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –≤ Supabase SQL Editor.

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –£–¥–∞–ª—è–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ DEFAULT –∫–æ—Ç–æ—Ä—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç —Ä–æ–ª–∏
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∞—à—É owner —Ä–æ–ª—å
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è owner/admin —Ä–æ–ª–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 'basic' —Ç–æ–ª—å–∫–æ –¥–ª—è –ù–û–í–´–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úÖ –°–ò–°–¢–ï–ú–ê –†–û–õ–ï–ô –ò–°–ü–†–ê–í–õ–ï–ù–ê!
üìä –¢–µ–∫—É—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
üë• –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
üéØ –í–ê–® –ü–†–û–§–ò–õ–¨ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–æ–ª—å: owner)
```

### –®–ê–ì 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ–ª–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
–ï—Å–ª–∏ —É –≤–∞—Å –±—ã–ª–∏ –∞–¥–º–∏–Ω—ã –∏–ª–∏ exclusive –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–±–∞–≤—å—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ 32-33):
```sql
UPDATE profiles SET role = 'admin' WHERE email = 'admin@example.com';
UPDATE profiles SET role = 'exclusive' WHERE email = 'artist@example.com';
```

### –®–ê–ì 4: –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
1. `Ctrl + Shift + Delete`
2. –û—á–∏—Å—Ç–∏—Ç–µ cookies –∏ localStorage
3. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

### –®–ê–ì 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
npm run dev
```

### –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞–±–∏–Ω–µ—Ç–∞ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –Ω–∞–π–¥–µ–Ω! Email: your@email.com –†–æ–ª—å –∏–∑ –ë–î: owner
üéØ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–æ–ª—å: owner
‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ä–æ–ª—å: owner
```

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

### 1. app/auth/page.tsx
**–ë—ã–ª–æ:**
```typescript
role: 'basic' // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–ª–∏ basic –≤—Å–µ–º
```
**–°—Ç–∞–ª–æ:**
```typescript
// –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º role - –ë–î —Å–∞–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç 'basic' –¥–ª—è –Ω–æ–≤—ã—Ö –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é
```

### 2. app/cabinet/page.tsx
**–ë—ã–ª–æ:**
```typescript
role: 'basic', // –í—Å–µ–≥–¥–∞ basic
```
**–°—Ç–∞–ª–æ:**
```typescript
// –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–æ–ª—å - —Ç—Ä–∏–≥–≥–µ—Ä –≤ –ë–î —É—Å—Ç–∞–Ω–æ–≤–∏—Ç 'basic' –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–æ–ª—å –ø—É—Å—Ç–∞—è
```

### 3. app/admin/page.tsx
**–ë—ã–ª–æ:**
```typescript
if (!profile.role || profile.role === '') {
  supabase.from('profiles').update({ role: 'basic' }) // ‚ùå –°–±—Ä–∞—Å—ã–≤–∞–ª–∏ —Ä–æ–ª—å!
}
```
**–°—Ç–∞–ª–æ:**
```typescript
// –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–ª—å –≤ –ë–î - –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫ 'basic' –≤ UI
```

## –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

–¢–µ–ø–µ—Ä—å –≤ –ë–î –µ—Å—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä `protect_roles_trigger` –∫–æ—Ç–æ—Ä—ã–π:
- üõ°Ô∏è –ó–∞–ø—Ä–µ—â–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ owner
- üõ°Ô∏è –ó–∞–ø—Ä–µ—â–∞–µ—Ç –ø–æ–Ω–∏–∂–µ–Ω–∏–µ admin –¥–æ basic/exclusive
- ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—ã—à–∞—Ç—å —Ä–æ–ª–∏ (basic ‚Üí exclusive ‚Üí admin)

## –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –£ –≤–∞—Å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–æ–ª—å **owner** ‚ôõ
- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç —Ä–æ–ª—å **basic** ‚óã
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–æ–ª–∏ –Ω–µ –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞
1. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—ã–≤–æ–¥ SQL —Å–∫—Ä–∏–ø—Ç–∞
2. –ü–æ–∫–∞–∂–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: `SELECT email, role FROM profiles;`
