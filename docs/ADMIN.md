# Админ-панель

## Обзор

Админ-панель доступна по адресу `/admin` для пользователей с ролью `admin`.

## Структура компонентов

```
app/admin/
├── page.tsx                # Главная страница админки
└── components/
    ├── index.ts            # Экспорт всех компонентов
    ├── types.ts            # TypeScript типы
    ├── constants.ts        # Константы и настройки
    ├── ui/                 # UI компоненты
    │   └── index.tsx       # Button, Input, Modal, Badge и др.
    ├── moderation/         # Компоненты модерации
    ├── tickets/            # Компоненты тикетов
    ├── users/              # Компоненты пользователей
    ├── ReleasesModeration.tsx
    ├── AdminTicketsPanel.tsx
    ├── UsersTab.tsx
    ├── PayoutsTab.tsx
    ├── WithdrawalsTab.tsx
    ├── NewsTab.tsx
    ├── DemosTab.tsx
    └── ...
```

## Разделы

### Релизы (ReleasesModeration)
Модерация музыкальных релизов:
- Просмотр релизов со статусом `pending`
- Одобрение / Отклонение релизов
- Просмотр чеков оплаты (Basic)
- Прослушивание треков
- Генерация UPC/ISRC кодов

### Тикеты (AdminTicketsPanel)
Система поддержки:
- Список всех тикетов
- Переписка с пользователями
- Изменение статуса тикета
- Закрытие тикетов

### Пользователи (UsersTab)
Управление пользователями:
- Список всех пользователей
- Изменение роли (Basic/Exclusive/Admin)
- Просмотр баланса
- Блокировка

### Выплаты (PayoutsTab)
Начисление средств артистам:
- Массовое начисление
- История начислений

### Выводы (WithdrawalsTab)
Обработка заявок на вывод:
- Просмотр заявок
- Одобрение / Отклонение
- История выводов

### Новости (NewsTab)
Управление новостями:
- Создание новостей
- Редактирование
- Публикация / Снятие

### Демо (DemosTab)
Рассмотрение демо-заявок:
- Прослушивание треков
- Одобрение / Отклонение
- Обратная связь

## Статусы релизов

| Статус | Описание |
|--------|----------|
| `draft` | Черновик (не отправлен) |
| `pending` | На модерации |
| `approved` | Одобрен, ожидает дистрибуции |
| `rejected` | Отклонён |
| `distributed` | В процессе дистрибуции |
| `published` | Опубликован на площадках |

## Процесс модерации релиза

1. Пользователь отправляет релиз на модерацию
2. Релиз появляется в разделе "Релизы" админки
3. Админ проверяет:
   - Качество обложки
   - Качество треков
   - Чек оплаты (для Basic)
   - Корректность метаданных
4. Одобряет или отклоняет с указанием причины
5. При одобрении генерируются UPC/ISRC коды

## Использование UI компонентов

```tsx
import { 
  Button, 
  Input, 
  Modal, 
  Badge,
  SearchInput 
} from './ui';

// Кнопка
<Button variant="primary" loading={isLoading}>
  Сохранить
</Button>

// Бейдж статуса
<Badge variant="success">Одобрен</Badge>

// Модальное окно
<Modal isOpen={show} onClose={close} title="Заголовок">
  <p>Контент</p>
</Modal>
```

## API Endpoints

Админ-панель использует следующие API:

- `GET /api/admin/releases` - список релизов
- `POST /api/admin/releases/[id]/approve` - одобрить
- `POST /api/admin/releases/[id]/reject` - отклонить
- `GET /api/admin/users` - список пользователей
- `PATCH /api/admin/users/[id]` - изменить пользователя
- `GET /api/admin/tickets` - список тикетов
- `GET /api/admin/withdrawals` - список выводов
- `POST /api/admin/withdrawals/[id]/process` - обработать вывод
